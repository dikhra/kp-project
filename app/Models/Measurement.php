<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Measurement extends Model
{
    use HasFactory;

    protected $fillable = [
        'nik',
        'tanggal_pengukuran',
        'berat_badan',
        'panjang_badan',
        'lingkar_kepala',
        'cara_pengukuran',
    ];

    protected $dates = ['tanggal_pengukuran'];

    public function child()
    {
        return $this->belongsTo(Child::class, 'nik', 'nik');
    }

    public function calculateAgeInMonths($tanggal_pengukuran)
    {
        $tanggal_lahir = $this->child->tanggal_lahir;

        $diff = $tanggal_lahir->diff($tanggal_pengukuran);
        $ageInMonths = $diff->y * 12 + $diff->m + $diff->d / 30;

        return $ageInMonths;
    }

    public function hitungZScoreBBU($berat, $umurBulan)
    {
        $tableZscoreGirls = [
            ["Month" => 0, "SD3neg" => 2, "SD2neg" => 2.4, "SD1neg" => 2.8, "SD0" => 3.2, "SD1" => 3.7, "SD2" => 4.2, "SD3" => 4.8],
            ["Month" => 1, "SD3neg" => 2.7, "SD2neg" => 3.2, "SD1neg" => 3.6, "SD0" => 4.2, "SD1" => 4.8, "SD2" => 5.5, "SD3" => 6.2],
            ["Month" => 2, "SD3neg" => 3.4, "SD2neg" => 3.9, "SD1neg" => 4.5, "SD0" => 5.1, "SD1" => 5.8, "SD2" => 6.6, "SD3" => 7.5],
            ["Month" => 3, "SD3neg" => 4, "SD2neg" => 4.5, "SD1neg" => 5.2, "SD0" => 5.8, "SD1" => 6.6, "SD2" => 7.5, "SD3" => 8.5],
            ["Month" => 4, "SD3neg" => 4.4, "SD2neg" => 5, "SD1neg" => 5.7, "SD0" => 6.4, "SD1" => 7.3, "SD2" => 8.2, "SD3" => 9.3],
            ["Month" => 5, "SD3neg" => 4.8, "SD2neg" => 5.4, "SD1neg" => 6.1, "SD0" => 6.9, "SD1" => 7.8, "SD2" => 8.8, "SD3" => 10],
            ["Month" => 6, "SD3neg" => 5.1, "SD2neg" => 5.7, "SD1neg" => 6.5, "SD0" => 7.3, "SD1" => 8.2, "SD2" => 9.3, "SD3" => 10.6],
            ["Month" => 7, "SD3neg" => 5.3, "SD2neg" => 6, "SD1neg" => 6.8, "SD0" => 7.6, "SD1" => 8.6, "SD2" => 9.8, "SD3" => 11.1],
            ["Month" => 8, "SD3neg" => 5.6, "SD2neg" => 6.3, "SD1neg" => 7, "SD0" => 7.9, "SD1" => 9, "SD2" => 10.2, "SD3" => 11.6],
            ["Month" => 9, "SD3neg" => 5.8, "SD2neg" => 6.5, "SD1neg" => 7.3, "SD0" => 8.2, "SD1" => 9.3, "SD2" => 10.5, "SD3" => 12],
            ["Month" => 10, "SD3neg" => 5.9, "SD2neg" => 6.7, "SD1neg" => 7.5, "SD0" => 8.5, "SD1" => 9.6, "SD2" => 10.9, "SD3" => 12.4],
            ["Month" => 11, "SD3neg" => 6.1, "SD2neg" => 6.9, "SD1neg" => 7.7, "SD0" => 8.7, "SD1" => 9.9, "SD2" => 11.2, "SD3" => 12.8],
            ["Month" => 12, "SD3neg" => 6.3, "SD2neg" => 7, "SD1neg" => 7.9, "SD0" => 8.9, "SD1" => 10.1, "SD2" => 11.5, "SD3" => 13.1],
            ["Month" => 13, "SD3neg" => 6.4, "SD2neg" => 7.2, "SD1neg" => 8.1, "SD0" => 9.2, "SD1" => 10.4, "SD2" => 11.8, "SD3" => 13.5],
            ["Month" => 14, "SD3neg" => 6.6, "SD2neg" => 7.4, "SD1neg" => 8.3, "SD0" => 9.4, "SD1" => 10.6, "SD2" => 12.1, "SD3" => 13.8],
            ["Month" => 15, "SD3neg" => 6.7, "SD2neg" => 7.6, "SD1neg" => 8.5, "SD0" => 9.6, "SD1" => 10.9, "SD2" => 12.4, "SD3" => 14.1],
            ["Month" => 16, "SD3neg" => 6.9, "SD2neg" => 7.7, "SD1neg" => 8.7, "SD0" => 9.8, "SD1" => 11.1, "SD2" => 12.6, "SD3" => 14.5],
            ["Month" => 17, "SD3neg" => 7, "SD2neg" => 7.9, "SD1neg" => 8.9, "SD0" => 10, "SD1" => 11.4, "SD2" => 12.9, "SD3" => 14.8],
            ["Month" => 18, "SD3neg" => 7.2, "SD2neg" => 8.1, "SD1neg" => 9.1, "SD0" => 10.2, "SD1" => 11.6, "SD2" => 13.2, "SD3" => 15.1],
            ["Month" => 19, "SD3neg" => 7.3, "SD2neg" => 8.2, "SD1neg" => 9.2, "SD0" => 10.4, "SD1" => 11.8, "SD2" => 13.5, "SD3" => 15.4],
            ["Month" => 20, "SD3neg" => 7.5, "SD2neg" => 8.4, "SD1neg" => 9.4, "SD0" => 10.6, "SD1" => 12.1, "SD2" => 13.7, "SD3" => 15.7],
            ["Month" => 21, "SD3neg" => 7.6, "SD2neg" => 8.6, "SD1neg" => 9.6, "SD0" => 10.9, "SD1" => 12.3, "SD2" => 14, "SD3" => 16],
            ["Month" => 22, "SD3neg" => 7.8, "SD2neg" => 8.7, "SD1neg" => 9.8, "SD0" => 11.1, "SD1" => 12.5, "SD2" => 14.3, "SD3" => 16.4],
            ["Month" => 23, "SD3neg" => 7.9, "SD2neg" => 8.9, "SD1neg" => 10, "SD0" => 11.3, "SD1" => 12.8, "SD2" => 14.6, "SD3" => 16.7],
            ["Month" => 24, "SD3neg" => 8.1, "SD2neg" => 9, "SD1neg" => 10.2, "SD0" => 11.5, "SD1" => 13, "SD2" => 14.8, "SD3" => 17],
            ["Month" => 25, "SD3neg" => 8.2, "SD2neg" => 9.2, "SD1neg" => 10.3, "SD0" => 11.7, "SD1" => 13.3, "SD2" => 15.1, "SD3" => 17.3],
            ["Month" => 26, "SD3neg" => 8.4, "SD2neg" => 9.4, "SD1neg" => 10.5, "SD0" => 11.9, "SD1" => 13.5, "SD2" => 15.4, "SD3" => 17.7],
            ["Month" => 27, "SD3neg" => 8.5, "SD2neg" => 9.5, "SD1neg" => 10.7, "SD0" => 12.1, "SD1" => 13.7, "SD2" => 15.7, "SD3" => 18],
            ["Month" => 28, "SD3neg" => 8.6, "SD2neg" => 9.7, "SD1neg" => 10.9, "SD0" => 12.3, "SD1" => 14, "SD2" => 16, "SD3" => 18.3],
            ["Month" => 29, "SD3neg" => 8.8, "SD2neg" => 9.8, "SD1neg" => 11.1, "SD0" => 12.5, "SD1" => 14.2, "SD2" => 16.2, "SD3" => 18.7],
            ["Month" => 30, "SD3neg" => 8.9, "SD2neg" => 10, "SD1neg" => 11.2, "SD0" => 12.7, "SD1" => 14.4, "SD2" => 16.5, "SD3" => 19],
            ["Month" => 31, "SD3neg" => 9, "SD2neg" => 10.1, "SD1neg" => 11.4, "SD0" => 12.9, "SD1" => 14.7, "SD2" => 16.8, "SD3" => 19.3],
            ["Month" => 32, "SD3neg" => 9.1, "SD2neg" => 10.3, "SD1neg" => 11.6, "SD0" => 13.1, "SD1" => 14.9, "SD2" => 17.1, "SD3" => 19.6],
            ["Month" => 33, "SD3neg" => 9.3, "SD2neg" => 10.4, "SD1neg" => 11.7, "SD0" => 13.3, "SD1" => 15.1, "SD2" => 17.3, "SD3" => 20],
            ["Month" => 34, "SD3neg" => 9.4, "SD2neg" => 10.5, "SD1neg" => 11.9, "SD0" => 13.5, "SD1" => 15.4, "SD2" => 17.6, "SD3" => 20.3],
            ["Month" => 35, "SD3neg" => 9.5, "SD2neg" => 10.7, "SD1neg" => 12, "SD0" => 13.7, "SD1" => 15.6, "SD2" => 17.9, "SD3" => 20.6],
            ["Month" => 36, "SD3neg" => 9.6, "SD2neg" => 10.8, "SD1neg" => 12.2, "SD0" => 13.9, "SD1" => 15.8, "SD2" => 18.1, "SD3" => 20.9],
            ["Month" => 37, "SD3neg" => 9.7, "SD2neg" => 10.9, "SD1neg" => 12.4, "SD0" => 14, "SD1" => 16, "SD2" => 18.4, "SD3" => 21.3],
            ["Month" => 38, "SD3neg" => 9.8, "SD2neg" => 11.1, "SD1neg" => 12.5, "SD0" => 14.2, "SD1" => 16.3, "SD2" => 18.7, "SD3" => 21.6],
            ["Month" => 39, "SD3neg" => 9.9, "SD2neg" => 11.2, "SD1neg" => 12.7, "SD0" => 14.4, "SD1" => 16.5, "SD2" => 19, "SD3" => 22],
            ["Month" => 40, "SD3neg" => 10.1, "SD2neg" => 11.3, "SD1neg" => 12.8, "SD0" => 14.6, "SD1" => 16.7, "SD2" => 19.2, "SD3" => 22.3],
            ["Month" => 41, "SD3neg" => 10.2, "SD2neg" => 11.5, "SD1neg" => 13, "SD0" => 14.8, "SD1" => 16.9, "SD2" => 19.5, "SD3" => 22.7],
            ["Month" => 42, "SD3neg" => 10.3, "SD2neg" => 11.6, "SD1neg" => 13.1, "SD0" => 15, "SD1" => 17.2, "SD2" => 19.8, "SD3" => 23],
            ["Month" => 43, "SD3neg" => 10.4, "SD2neg" => 11.7, "SD1neg" => 13.3, "SD0" => 15.2, "SD1" => 17.4, "SD2" => 20.1, "SD3" => 23.4],
            ["Month" => 44, "SD3neg" => 10.5, "SD2neg" => 11.8, "SD1neg" => 13.4, "SD0" => 15.3, "SD1" => 17.6, "SD2" => 20.4, "SD3" => 23.7],
            ["Month" => 45, "SD3neg" => 10.6, "SD2neg" => 12, "SD1neg" => 13.6, "SD0" => 15.5, "SD1" => 17.8, "SD2" => 20.7, "SD3" => 24.1],
            ["Month" => 46, "SD3neg" => 10.7, "SD2neg" => 12.1, "SD1neg" => 13.7, "SD0" => 15.7, "SD1" => 18.1, "SD2" => 20.9, "SD3" => 24.5],
            ["Month" => 47, "SD3neg" => 10.8, "SD2neg" => 12.2, "SD1neg" => 13.9, "SD0" => 15.9, "SD1" => 18.3, "SD2" => 21.2, "SD3" => 24.8],
            ["Month" => 48, "SD3neg" => 10.9, "SD2neg" => 12.3, "SD1neg" => 14, "SD0" => 16.1, "SD1" => 18.5, "SD2" => 21.5, "SD3" => 25.2],
            ["Month" => 49, "SD3neg" => 11, "SD2neg" => 12.4, "SD1neg" => 14.2, "SD0" => 16.3, "SD1" => 18.8, "SD2" => 21.8, "SD3" => 25.5],
            ["Month" => 50, "SD3neg" => 11.1, "SD2neg" => 12.6, "SD1neg" => 14.3, "SD0" => 16.4, "SD1" => 19, "SD2" => 22.1, "SD3" => 25.9],
            ["Month" => 51, "SD3neg" => 11.2, "SD2neg" => 12.7, "SD1neg" => 14.5, "SD0" => 16.6, "SD1" => 19.2, "SD2" => 22.4, "SD3" => 26.3],
            ["Month" => 52, "SD3neg" => 11.3, "SD2neg" => 12.8, "SD1neg" => 14.6, "SD0" => 16.8, "SD1" => 19.4, "SD2" => 22.6, "SD3" => 26.6],
            ["Month" => 53, "SD3neg" => 11.4, "SD2neg" => 12.9, "SD1neg" => 14.8, "SD0" => 17, "SD1" => 19.7, "SD2" => 22.9, "SD3" => 27],
            ["Month" => 54, "SD3neg" => 11.5, "SD2neg" => 13, "SD1neg" => 14.9, "SD0" => 17.2, "SD1" => 19.9, "SD2" => 23.2, "SD3" => 27.4],
            ["Month" => 55, "SD3neg" => 11.6, "SD2neg" => 13.2, "SD1neg" => 15.1, "SD0" => 17.3, "SD1" => 20.1, "SD2" => 23.5, "SD3" => 27.7],
            ["Month" => 56, "SD3neg" => 11.7, "SD2neg" => 13.3, "SD1neg" => 15.2, "SD0" => 17.5, "SD1" => 20.3, "SD2" => 23.8, "SD3" => 28.1],
            ["Month" => 57, "SD3neg" => 11.8, "SD2neg" => 13.4, "SD1neg" => 15.4, "SD0" => 17.7, "SD1" => 20.6, "SD2" => 24.1, "SD3" => 28.5],
            ["Month" => 58, "SD3neg" => 11.9, "SD2neg" => 13.5, "SD1neg" => 15.5, "SD0" => 17.9, "SD1" => 20.8, "SD2" => 24.4, "SD3" => 28.8],
            ["Month" => 59, "SD3neg" => 12, "SD2neg" => 13.6, "SD1neg" => 15.7, "SD0" => 18.1, "SD1" => 21, "SD2" => 24.7, "SD3" => 29.2]
        ];

        $tableZscoreBoys = [
            ["Month" => 0, "SD3neg" => 2.1, "SD2neg" => 2.5, "SD1neg" => 2.9, "SD0" => 3.3, "SD1" => 3.9, "SD2" => 4.4, "SD3" => 5],
            ["Month" => 1, "SD3neg" => 2.9, "SD2neg" => 3.4, "SD1neg" => 3.9, "SD0" => 4.5, "SD1" => 5.1, "SD2" => 5.8, "SD3" => 6.6],
            ["Month" => 2, "SD3neg" => 3.8, "SD2neg" => 4.3, "SD1neg" => 4.9, "SD0" => 5.6, "SD1" => 6.3, "SD2" => 7.1, "SD3" => 8],
            ["Month" => 3, "SD3neg" => 4.4, "SD2neg" => 5, "SD1neg" => 5.7, "SD0" => 6.4, "SD1" => 7.2, "SD2" => 8, "SD3" => 9],
            ["Month" => 4, "SD3neg" => 4.9, "SD2neg" => 5.6, "SD1neg" => 6.2, "SD0" => 7, "SD1" => 7.8, "SD2" => 8.7, "SD3" => 9.7],
            ["Month" => 5, "SD3neg" => 5.3, "SD2neg" => 6, "SD1neg" => 6.7, "SD0" => 7.5, "SD1" => 8.4, "SD2" => 9.3, "SD3" => 10.4],
            ["Month" => 6, "SD3neg" => 5.7, "SD2neg" => 6.4, "SD1neg" => 7.1, "SD0" => 7.9, "SD1" => 8.8, "SD2" => 9.8, "SD3" => 10.9],
            ["Month" => 7, "SD3neg" => 5.9, "SD2neg" => 6.7, "SD1neg" => 7.4, "SD0" => 8.3, "SD1" => 9.2, "SD2" => 10.3, "SD3" => 11.4],
            ["Month" => 8, "SD3neg" => 6.2, "SD2neg" => 6.9, "SD1neg" => 7.7, "SD0" => 8.6, "SD1" => 9.6, "SD2" => 10.7, "SD3" => 11.9],
            ["Month" => 9, "SD3neg" => 6.4, "SD2neg" => 7.1, "SD1neg" => 8, "SD0" => 8.9, "SD1" => 9.9, "SD2" => 11, "SD3" => 12.3],
            ["Month" => 10, "SD3neg" => 6.6, "SD2neg" => 7.4, "SD1neg" => 8.2, "SD0" => 9.2, "SD1" => 10.2, "SD2" => 11.4, "SD3" => 12.7],
            ["Month" => 11, "SD3neg" => 6.8, "SD2neg" => 7.6, "SD1neg" => 8.4, "SD0" => 9.4, "SD1" => 10.5, "SD2" => 11.7, "SD3" => 13],
            ["Month" => 12, "SD3neg" => 6.9, "SD2neg" => 7.7, "SD1neg" => 8.6, "SD0" => 9.6, "SD1" => 10.8, "SD2" => 12, "SD3" => 13.3],
            ["Month" => 13, "SD3neg" => 7.1, "SD2neg" => 7.9, "SD1neg" => 8.8, "SD0" => 9.9, "SD1" => 11, "SD2" => 12.3, "SD3" => 13.7],
            ["Month" => 14, "SD3neg" => 7.2, "SD2neg" => 8.1, "SD1neg" => 9, "SD0" => 10.1, "SD1" => 11.3, "SD2" => 12.6, "SD3" => 14],
            ["Month" => 15, "SD3neg" => 7.4, "SD2neg" => 8.3, "SD1neg" => 9.2, "SD0" => 10.3, "SD1" => 11.5, "SD2" => 12.8, "SD3" => 14.3],
            ["Month" => 16, "SD3neg" => 7.5, "SD2neg" => 8.4, "SD1neg" => 9.4, "SD0" => 10.5, "SD1" => 11.7, "SD2" => 13.1, "SD3" => 14.6],
            ["Month" => 17, "SD3neg" => 7.7, "SD2neg" => 8.6, "SD1neg" => 9.6, "SD0" => 10.7, "SD1" => 12, "SD2" => 13.4, "SD3" => 14.9],
            ["Month" => 18, "SD3neg" => 7.8, "SD2neg" => 8.8, "SD1neg" => 9.8, "SD0" => 10.9, "SD1" => 12.2, "SD2" => 13.7, "SD3" => 15.3],
            ["Month" => 19, "SD3neg" => 8, "SD2neg" => 8.9, "SD1neg" => 10, "SD0" => 11.1, "SD1" => 12.5, "SD2" => 13.9, "SD3" => 15.6],
            ["Month" => 20, "SD3neg" => 8.1, "SD2neg" => 9.1, "SD1neg" => 10.1, "SD0" => 11.3, "SD1" => 12.7, "SD2" => 14.2, "SD3" => 15.9],
            ["Month" => 21, "SD3neg" => 8.2, "SD2neg" => 9.2, "SD1neg" => 10.3, "SD0" => 11.5, "SD1" => 12.9, "SD2" => 14.5, "SD3" => 16.2],
            ["Month" => 22, "SD3neg" => 8.4, "SD2neg" => 9.4, "SD1neg" => 10.5, "SD0" => 11.8, "SD1" => 13.2, "SD2" => 14.7, "SD3" => 16.5],
            ["Month" => 23, "SD3neg" => 8.5, "SD2neg" => 9.5, "SD1neg" => 10.7, "SD0" => 12, "SD1" => 13.4, "SD2" => 15, "SD3" => 16.8],
            ["Month" => 24, "SD3neg" => 8.6, "SD2neg" => 9.7, "SD1neg" => 10.8, "SD0" => 12.2, "SD1" => 13.6, "SD2" => 15.3, "SD3" => 17.1],
            ["Month" => 25, "SD3neg" => 8.8, "SD2neg" => 9.8, "SD1neg" => 11, "SD0" => 12.4, "SD1" => 13.9, "SD2" => 15.5, "SD3" => 17.5],
            ["Month" => 26, "SD3neg" => 8.9, "SD2neg" => 10, "SD1neg" => 11.2, "SD0" => 12.5, "SD1" => 14.1, "SD2" => 15.8, "SD3" => 17.8],
            ["Month" => 27, "SD3neg" => 9, "SD2neg" => 10.1, "SD1neg" => 11.3, "SD0" => 12.7, "SD1" => 14.3, "SD2" => 16.1, "SD3" => 18.1],
            ["Month" => 28, "SD3neg" => 9.1, "SD2neg" => 10.2, "SD1neg" => 11.5, "SD0" => 12.9, "SD1" => 14.5, "SD2" => 16.3, "SD3" => 18.4],
            ["Month" => 29, "SD3neg" => 9.2, "SD2neg" => 10.4, "SD1neg" => 11.7, "SD0" => 13.1, "SD1" => 14.8, "SD2" => 16.6, "SD3" => 18.7],
            ["Month" => 30, "SD3neg" => 9.4, "SD2neg" => 10.5, "SD1neg" => 11.8, "SD0" => 13.3, "SD1" => 15, "SD2" => 16.9, "SD3" => 19],
            ["Month" => 31, "SD3neg" => 9.5, "SD2neg" => 10.7, "SD1neg" => 12, "SD0" => 13.5, "SD1" => 15.2, "SD2" => 17.1, "SD3" => 19.3],
            ["Month" => 32, "SD3neg" => 9.6, "SD2neg" => 10.8, "SD1neg" => 12.1, "SD0" => 13.7, "SD1" => 15.4, "SD2" => 17.4, "SD3" => 19.6],
            ["Month" => 33, "SD3neg" => 9.7, "SD2neg" => 10.9, "SD1neg" => 12.3, "SD0" => 13.8, "SD1" => 15.6, "SD2" => 17.6, "SD3" => 19.9],
            ["Month" => 34, "SD3neg" => 9.8, "SD2neg" => 11, "SD1neg" => 12.4, "SD0" => 14, "SD1" => 15.8, "SD2" => 17.8, "SD3" => 20.2],
            ["Month" => 35, "SD3neg" => 9.9, "SD2neg" => 11.2, "SD1neg" => 12.6, "SD0" => 14.2, "SD1" => 16, "SD2" => 18.1, "SD3" => 20.4],
            ["Month" => 36, "SD3neg" => 10, "SD2neg" => 11.3, "SD1neg" => 12.7, "SD0" => 14.3, "SD1" => 16.2, "SD2" => 18.3, "SD3" => 20.7],
            ["Month" => 37, "SD3neg" => 10.1, "SD2neg" => 11.4, "SD1neg" => 12.9, "SD0" => 14.5, "SD1" => 16.4, "SD2" => 18.6, "SD3" => 21],
            ["Month" => 38, "SD3neg" => 10.2, "SD2neg" => 11.5, "SD1neg" => 13, "SD0" => 14.7, "SD1" => 16.6, "SD2" => 18.8, "SD3" => 21.3],
            ["Month" => 39, "SD3neg" => 10.3, "SD2neg" => 11.6, "SD1neg" => 13.1, "SD0" => 14.8, "SD1" => 16.8, "SD2" => 19, "SD3" => 21.6],
            ["Month" => 40, "SD3neg" => 10.4, "SD2neg" => 11.8, "SD1neg" => 13.3, "SD0" => 15, "SD1" => 17, "SD2" => 19.3, "SD3" => 21.9],
            ["Month" => 41, "SD3neg" => 10.5, "SD2neg" => 11.9, "SD1neg" => 13.4, "SD0" => 15.2, "SD1" => 17.2, "SD2" => 19.5, "SD3" => 22.1],
            ["Month" => 42, "SD3neg" => 10.6, "SD2neg" => 12, "SD1neg" => 13.6, "SD0" => 15.3, "SD1" => 17.4, "SD2" => 19.7, "SD3" => 22.4],
            ["Month" => 43, "SD3neg" => 10.7, "SD2neg" => 12.1, "SD1neg" => 13.7, "SD0" => 15.5, "SD1" => 17.6, "SD2" => 20, "SD3" => 22.7],
            ["Month" => 44, "SD3neg" => 10.8, "SD2neg" => 12.2, "SD1neg" => 13.8, "SD0" => 15.7, "SD1" => 17.8, "SD2" => 20.2, "SD3" => 23],
            ["Month" => 45, "SD3neg" => 10.9, "SD2neg" => 12.4, "SD1neg" => 14, "SD0" => 15.8, "SD1" => 18, "SD2" => 20.5, "SD3" => 23.3],
            ["Month" => 46, "SD3neg" => 11, "SD2neg" => 12.5, "SD1neg" => 14.1, "SD0" => 16, "SD1" => 18.2, "SD2" => 20.7, "SD3" => 23.6],
            ["Month" => 47, "SD3neg" => 11.1, "SD2neg" => 12.6, "SD1neg" => 14.3, "SD0" => 16.2, "SD1" => 18.4, "SD2" => 20.9, "SD3" => 23.9],
            ["Month" => 48, "SD3neg" => 11.2, "SD2neg" => 12.7, "SD1neg" => 14.4, "SD0" => 16.3, "SD1" => 18.6, "SD2" => 21.2, "SD3" => 24.2],
            ["Month" => 49, "SD3neg" => 11.3, "SD2neg" => 12.8, "SD1neg" => 14.5, "SD0" => 16.5, "SD1" => 18.8, "SD2" => 21.4, "SD3" => 24.5],
            ["Month" => 50, "SD3neg" => 11.4, "SD2neg" => 12.9, "SD1neg" => 14.7, "SD0" => 16.7, "SD1" => 19, "SD2" => 21.7, "SD3" => 24.8],
            ["Month" => 51, "SD3neg" => 11.5, "SD2neg" => 13.1, "SD1neg" => 14.8, "SD0" => 16.8, "SD1" => 19.2, "SD2" => 21.9, "SD3" => 25.1],
            ["Month" => 52, "SD3neg" => 11.6, "SD2neg" => 13.2, "SD1neg" => 15, "SD0" => 17, "SD1" => 19.4, "SD2" => 22.2, "SD3" => 25.4],
            ["Month" => 53, "SD3neg" => 11.7, "SD2neg" => 13.3, "SD1neg" => 15.1, "SD0" => 17.2, "SD1" => 19.6, "SD2" => 22.4, "SD3" => 25.7],
            ["Month" => 54, "SD3neg" => 11.8, "SD2neg" => 13.4, "SD1neg" => 15.2, "SD0" => 17.3, "SD1" => 19.8, "SD2" => 22.7, "SD3" => 26],
            ["Month" => 55, "SD3neg" => 11.9, "SD2neg" => 13.5, "SD1neg" => 15.4, "SD0" => 17.5, "SD1" => 20, "SD2" => 22.9, "SD3" => 26.3],
            ["Month" => 56, "SD3neg" => 12, "SD2neg" => 13.6, "SD1neg" => 15.5, "SD0" => 17.7, "SD1" => 20.2, "SD2" => 23.2, "SD3" => 26.6],
            ["Month" => 57, "SD3neg" => 12.1, "SD2neg" => 13.7, "SD1neg" => 15.6, "SD0" => 17.8, "SD1" => 20.4, "SD2" => 23.4, "SD3" => 26.9],
            ["Month" => 58, "SD3neg" => 12.2, "SD2neg" => 13.8, "SD1neg" => 15.8, "SD0" => 18, "SD1" => 20.6, "SD2" => 23.7, "SD3" => 27.2],
            ["Month" => 59, "SD3neg" => 12.3, "SD2neg" => 14, "SD1neg" => 15.9, "SD0" => 18.2, "SD1" => 20.8, "SD2" => 23.9, "SD3" => 27.6],
            ["Month" => 60, "SD3neg" => 12.4, "SD2neg" => 14.1, "SD1neg" => 16, "SD0" => 18.3, "SD1" => 21, "SD2" => 24.2, "SD3" => 27.9]
        ];

        if ($this->child->jenis_kelamin == "Laki-laki") {
            if ($berat < $tableZscoreBoys[$umurBulan]["SD0"]) {
                $tbu = ($berat - $tableZscoreBoys[$umurBulan]["SD0"]) / ($tableZscoreBoys[$umurBulan]["SD0"] - $tableZscoreBoys[$umurBulan]["SD1neg"]);
                return $tbu;
            } else if ($berat > $tableZscoreBoys[$umurBulan]["SDO"]) {
                $tbu = ($berat - $tableZscoreBoys[$umurBulan]["SDO"]) / ($tableZscoreBoys[$umurBulan]["SD1"] - $tableZscoreBoys[$umurBulan]["SD0"]);
                return $tbu;
            }
        } else if ($this->child->jenis_kelamin == "Perempuan") {
            if ($berat < $tableZscoreGirls[$umurBulan]["SD0"]) {
                $tbu = ($berat - $tableZscoreGirls[$umurBulan]["SD0"]) / ($tableZscoreGirls[$umurBulan]["SD0"] - $tableZscoreGirls[$umurBulan]["SD1neg"]);
                return $tbu;
            } else if ($berat > $tableZscoreGirls[$umurBulan]["SD0"]) {
                $tbu = ($berat - $tableZscoreGirls[$umurBulan]["SD0"]) / ($tableZscoreGirls[$umurBulan]["SD1"] - $tableZscoreGirls[$umurBulan]["SD0"]);
                return $tbu;
            }
        }
    }

    public function hitungZscoreTBU($tinggi, $umurBulan)
    {
        $tableZscoreGirls = [
            ["Month" => 1, "SD3neg" => 43.6, "SD2neg" => 45.4, "SD1neg" => 47.3, "SD0" => 49.1, "SD1" => 51, "SD2" => 52.9, "SD3" => 54.7],
            ["Month" => 2, "SD3neg" => 47.8, "SD2neg" => 49.8, "SD1neg" => 51.7, "SD0" => 53.7, "SD1" => 55.6, "SD2" => 57.6, "SD3" => 59.5],
            ["Month" => 3, "SD3neg" => 51, "SD2neg" => 53, "SD1neg" => 55, "SD0" => 57.1, "SD1" => 59.1, "SD2" => 61.1, "SD3" => 63.2],
            ["Month" => 4, "SD3neg" => 53.5, "SD2neg" => 55.6, "SD1neg" => 57.7, "SD0" => 59.8, "SD1" => 61.9, "SD2" => 64, "SD3" => 66.1],
            ["Month" => 5, "SD3neg" => 55.6, "SD2neg" => 57.8, "SD1neg" => 59.9, "SD0" => 62.1, "SD1" => 64.3, "SD2" => 66.4, "SD3" => 68.6],
            ["Month" => 6, "SD3neg" => 57.4, "SD2neg" => 59.6, "SD1neg" => 61.8, "SD0" => 64, "SD1" => 66.2, "SD2" => 68.5, "SD3" => 70.7],
            ["Month" => 7, "SD3neg" => 58.9, "SD2neg" => 61.2, "SD1neg" => 63.5, "SD0" => 65.7, "SD1" => 68, "SD2" => 70.3, "SD3" => 72.5],
            ["Month" => 8, "SD3neg" => 60.3, "SD2neg" => 62.7, "SD1neg" => 65, "SD0" => 67.3, "SD1" => 69.6, "SD2" => 71.9, "SD3" => 74.2],
            ["Month" => 9, "SD3neg" => 61.7, "SD2neg" => 64, "SD1neg" => 66.4, "SD0" => 68.7, "SD1" => 71.1, "SD2" => 73.5, "SD3" => 75.8],
            ["Month" => 10, "SD3neg" => 62.9, "SD2neg" => 65.3, "SD1neg" => 67.7, "SD0" => 70.1, "SD1" => 72.6, "SD2" => 75, "SD3" => 77.4],
            ["Month" => 11, "SD3neg" => 64.1, "SD2neg" => 66.5, "SD1neg" => 69, "SD0" => 71.5, "SD1" => 73.9, "SD2" => 76.4, "SD3" => 78.9],
            ["Month" => 12, "SD3neg" => 65.2, "SD2neg" => 67.7, "SD1neg" => 70.3, "SD0" => 72.8, "SD1" => 75.3, "SD2" => 77.8, "SD3" => 80.3],
            ["Month" => 13, "SD3neg" => 66.3, "SD2neg" => 68.9, "SD1neg" => 71.4, "SD0" => 74, "SD1" => 76.6, "SD2" => 79.2, "SD3" => 81.7],
            ["Month" => 14, "SD3neg" => 67.3, "SD2neg" => 70, "SD1neg" => 72.6, "SD0" => 75.2, "SD1" => 77.8, "SD2" => 80.5, "SD3" => 83.1],
            ["Month" => 15, "SD3neg" => 68.3, "SD2neg" => 71, "SD1neg" => 73.7, "SD0" => 76.4, "SD1" => 79.1, "SD2" => 81.7, "SD3" => 84.4],
            ["Month" => 16, "SD3neg" => 69.3, "SD2neg" => 72, "SD1neg" => 74.8, "SD0" => 77.5, "SD1" => 80.2, "SD2" => 83, "SD3" => 85.7],
            ["Month" => 17, "SD3neg" => 70.2, "SD2neg" => 73, "SD1neg" => 75.8, "SD0" => 78.6, "SD1" => 81.4, "SD2" => 84.2, "SD3" => 87],
            ["Month" => 18, "SD3neg" => 71.1, "SD2neg" => 74, "SD1neg" => 76.8, "SD0" => 79.7, "SD1" => 82.5, "SD2" => 85.4, "SD3" => 88.2],
            ["Month" => 19, "SD3neg" => 72, "SD2neg" => 74.9, "SD1neg" => 77.8, "SD0" => 80.7, "SD1" => 83.6, "SD2" => 86.5, "SD3" => 89.4],
            ["Month" => 20, "SD3neg" => 72.8, "SD2neg" => 75.8, "SD1neg" => 78.8, "SD0" => 81.7, "SD1" => 84.7, "SD2" => 87.6, "SD3" => 90.6],
            ["Month" => 21, "SD3neg" => 73.7, "SD2neg" => 76.7, "SD1neg" => 79.7, "SD0" => 82.7, "SD1" => 85.7, "SD2" => 88.7, "SD3" => 91.7],
            ["Month" => 22, "SD3neg" => 74.5, "SD2neg" => 77.5, "SD1neg" => 80.6, "SD0" => 83.7, "SD1" => 86.7, "SD2" => 89.8, "SD3" => 92.9],
            ["Month" => 23, "SD3neg" => 75.2, "SD2neg" => 78.4, "SD1neg" => 81.5, "SD0" => 84.6, "SD1" => 87.7, "SD2" => 90.8, "SD3" => 94],
            ["Month" => 24, "SD3neg" => 76, "SD2neg" => 79.2, "SD1neg" => 82.3, "SD0" => 85.5, "SD1" => 88.7, "SD2" => 91.9, "SD3" => 95],
            ["Month" => 25, "SD3neg" => 76.8, "SD2neg" => 80, "SD1neg" => 83.3, "SD0" => 86.6, "SD1" => 89.9, "SD2" => 93.1, "SD3" => 96.4],
            ["Month" => 26, "SD3neg" => 77.5, "SD2neg" => 80.8, "SD1neg" => 84.1, "SD0" => 87.4, "SD1" => 90.8, "SD2" => 94.1, "SD3" => 97.4],
            ["Month" => 27, "SD3neg" => 78.1, "SD2neg" => 81.5, "SD1neg" => 84.9, "SD0" => 88.3, "SD1" => 91.7, "SD2" => 95, "SD3" => 98.4],
            ["Month" => 28, "SD3neg" => 78.8, "SD2neg" => 82.2, "SD1neg" => 85.7, "SD0" => 89.1, "SD1" => 92.5, "SD2" => 96, "SD3" => 99.4],
            ["Month" => 29, "SD3neg" => 79.5, "SD2neg" => 82.9, "SD1neg" => 86.4, "SD0" => 89.9, "SD1" => 93.4, "SD2" => 96.9, "SD3" => 100.3],
            ["Month" => 30, "SD3neg" => 80.1, "SD2neg" => 83.6, "SD1neg" => 87.1, "SD0" => 90.7, "SD1" => 94.2, "SD2" => 97.7, "SD3" => 101.3],
            ["Month" => 31, "SD3neg" => 80.7, "SD2neg" => 84.3, "SD1neg" => 87.9, "SD0" => 91.4, "SD1" => 95, "SD2" => 98.6, "SD3" => 102.2],
            ["Month" => 32, "SD3neg" => 81.3, "SD2neg" => 84.9, "SD1neg" => 88.6, "SD0" => 92.2, "SD1" => 95.8, "SD2" => 99.4, "SD3" => 103.1],
            ["Month" => 33, "SD3neg" => 81.9, "SD2neg" => 85.6, "SD1neg" => 89.3, "SD0" => 92.9, "SD1" => 96.6, "SD2" => 100.3, "SD3" => 103.9],
            ["Month" => 34, "SD3neg" => 82.5, "SD2neg" => 86.2, "SD1neg" => 89.9, "SD0" => 93.6, "SD1" => 97.4, "SD2" => 101.1, "SD3" => 104.8],
            ["Month" => 35, "SD3neg" => 83.1, "SD2neg" => 86.8, "SD1neg" => 90.6, "SD0" => 94.4, "SD1" => 98.1, "SD2" => 101.9, "SD3" => 105.6],
            ["Month" => 36, "SD3neg" => 83.6, "SD2neg" => 87.4, "SD1neg" => 91.2, "SD0" => 95.1, "SD1" => 98.9, "SD2" => 102.7, "SD3" => 106.5],
            ["Month" => 37, "SD3neg" => 84.2, "SD2neg" => 88, "SD1neg" => 91.9, "SD0" => 95.7, "SD1" => 99.6, "SD2" => 103.4, "SD3" => 107.3],
            ["Month" => 38, "SD3neg" => 84.7, "SD2neg" => 88.6, "SD1neg" => 92.5, "SD0" => 96.4, "SD1" => 100.3, "SD2" => 104.2, "SD3" => 108.1],
            ["Month" => 39, "SD3neg" => 85.3, "SD2neg" => 89.2, "SD1neg" => 93.1, "SD0" => 97.1, "SD1" => 101, "SD2" => 105, "SD3" => 108.9],
            ["Month" => 40, "SD3neg" => 85.8, "SD2neg" => 89.8, "SD1neg" => 93.8, "SD0" => 97.7, "SD1" => 101.7, "SD2" => 105.7, "SD3" => 109.7],
            ["Month" => 41, "SD3neg" => 86.3, "SD2neg" => 90.4, "SD1neg" => 94.4, "SD0" => 98.4, "SD1" => 102.4, "SD2" => 106.4, "SD3" => 110.5],
            ["Month" => 42, "SD3neg" => 86.8, "SD2neg" => 90.9, "SD1neg" => 95, "SD0" => 99, "SD1" => 103.1, "SD2" => 107.2, "SD3" => 111.2],
            ["Month" => 43, "SD3neg" => 87.4, "SD2neg" => 91.5, "SD1neg" => 95.6, "SD0" => 99.7, "SD1" => 103.8, "SD2" => 107.9, "SD3" => 112],
            ["Month" => 44, "SD3neg" => 87.9, "SD2neg" => 92, "SD1neg" => 96.2, "SD0" => 100.3, "SD1" => 104.5, "SD2" => 108.6, "SD3" => 112.7],
            ["Month" => 45, "SD3neg" => 88.4, "SD2neg" => 92.5, "SD1neg" => 96.7, "SD0" => 100.9, "SD1" => 105.1, "SD2" => 109.3, "SD3" => 113.5],
            ["Month" => 46, "SD3neg" => 88.9, "SD2neg" => 93.1, "SD1neg" => 97.3, "SD0" => 101.5, "SD1" => 105.8, "SD2" => 110, "SD3" => 114.2],
            ["Month" => 47, "SD3neg" => 89.3, "SD2neg" => 93.6, "SD1neg" => 97.9, "SD0" => 102.1, "SD1" => 106.4, "SD2" => 110.7, "SD3" => 114.9],
            ["Month" => 48, "SD3neg" => 89.8, "SD2neg" => 94.1, "SD1neg" => 98.4, "SD0" => 102.7, "SD1" => 107, "SD2" => 111.3, "SD3" => 115.7],
            ["Month" => 49, "SD3neg" => 90.3, "SD2neg" => 94.6, "SD1neg" => 99, "SD0" => 103.3, "SD1" => 107.7, "SD2" => 112, "SD3" => 116.4],
            ["Month" => 50, "SD3neg" => 90.7, "SD2neg" => 95.1, "SD1neg" => 99.5, "SD0" => 103.9, "SD1" => 108.3, "SD2" => 112.7, "SD3" => 117.1],
            ["Month" => 51, "SD3neg" => 91.2, "SD2neg" => 95.6, "SD1neg" => 100.1, "SD0" => 104.5, "SD1" => 108.9, "SD2" => 113.3, "SD3" => 117.7],
            ["Month" => 52, "SD3neg" => 91.7, "SD2neg" => 96.1, "SD1neg" => 100.6, "SD0" => 105, "SD1" => 109.5, "SD2" => 114, "SD3" => 118.4],
            ["Month" => 53, "SD3neg" => 92.1, "SD2neg" => 96.6, "SD1neg" => 101.1, "SD0" => 105.6, "SD1" => 110.1, "SD2" => 114.6, "SD3" => 119.1],
            ["Month" => 54, "SD3neg" => 92.6, "SD2neg" => 97.1, "SD1neg" => 101.6, "SD0" => 106.2, "SD1" => 110.7, "SD2" => 115.2, "SD3" => 119.8],
            ["Month" => 55, "SD3neg" => 93, "SD2neg" => 97.6, "SD1neg" => 102.2, "SD0" => 106.7, "SD1" => 111.3, "SD2" => 115.9, "SD3" => 120.4],
            ["Month" => 56, "SD3neg" => 93.4, "SD2neg" => 98.1, "SD1neg" => 102.7, "SD0" => 107.3, "SD1" => 111.9, "SD2" => 116.5, "SD3" => 121.1],
            ["Month" => 57, "SD3neg" => 93.9, "SD2neg" => 98.5, "SD1neg" => 103.2, "SD0" => 107.8, "SD1" => 112.5, "SD2" => 117.1, "SD3" => 121.8],
            ["Month" => 58, "SD3neg" => 94.3, "SD2neg" => 99, "SD1neg" => 103.7, "SD0" => 108.4, "SD1" => 113, "SD2" => 117.7, "SD3" => 122.4],
            ["Month" => 59, "SD3neg" => 94.7, "SD2neg" => 99.5, "SD1neg" => 104.2, "SD0" => 108.9, "SD1" => 113.6, "SD2" => 118.3, "SD3" => 123.1],
            ["Month" => 60, "SD3neg" => 95.2, "SD2neg" => 99.9, "SD1neg" => 104.7, "SD0" => 109.4, "SD1" => 114.2, "SD2" => 118.9, "SD3" => 123.7]
        ];
        $tableZscoreBoys = [
            ["Month" => 0, "L" => 1, "M" => 49.8842, "S" => 0.03795, "SD" => 1.8931, "SD3neg" => 44.2, "SD2neg" => 46.1, "SD1neg" => 48, "SD0" => 49.9, "SD1" => 51.8, "SD2" => 53.7, "SD3" => 55.6],
            ["Month" => 1, "L" => 1, "M" => 54.7244, "S" => 0.03557, "SD" => 1.9465, "SD3neg" => 48.9, "SD2neg" => 50.8, "SD1neg" => 52.8, "SD0" => 54.7, "SD1" => 56.7, "SD2" => 58.6, "SD3" => 60.6],
            ["Month" => 2, "L" => 1, "M" => 58.4249, "S" => 0.03424, "SD" => 2.0005, "SD3neg" => 52.4, "SD2neg" => 54.4, "SD1neg" => 56.4, "SD0" => 58.4, "SD1" => 60.4, "SD2" => 62.4, "SD3" => 64.4],
            ["Month" => 3, "L" => 1, "M" => 61.4292, "S" => 0.03328, "SD" => 2.0444, "SD3neg" => 55.3, "SD2neg" => 57.3, "SD1neg" => 59.4, "SD0" => 61.4, "SD1" => 63.5, "SD2" => 65.5, "SD3" => 67.6],
            ["Month" => 4, "L" => 1, "M" => 63.886, "S" => 0.03257, "SD" => 2.0808, "SD3neg" => 57.6, "SD2neg" => 59.7, "SD1neg" => 61.8, "SD0" => 63.9, "SD1" => 66, "SD2" => 68, "SD3" => 70.1],
            ["Month" => 5, "L" => 1, "M" => 65.9026, "S" => 0.03204, "SD" => 2.1115, "SD3neg" => 59.6, "SD2neg" => 61.7, "SD1neg" => 63.8, "SD0" => 65.9, "SD1" => 68, "SD2" => 70.1, "SD3" => 72.2],
            ["Month" => 6, "L" => 1, "M" => 67.6236, "S" => 0.03165, "SD" => 2.1403, "SD3neg" => 61.2, "SD2neg" => 63.3, "SD1neg" => 65.5, "SD0" => 67.6, "SD1" => 69.8, "SD2" => 71.9, "SD3" => 74],
            ["Month" => 7, "L" => 1, "M" => 69.1645, "S" => 0.03139, "SD" => 2.1711, "SD3neg" => 62.7, "SD2neg" => 64.8, "SD1neg" => 67, "SD0" => 69.2, "SD1" => 71.3, "SD2" => 73.5, "SD3" => 75.7],
            ["Month" => 8, "L" => 1, "M" => 70.5994, "S" => 0.03124, "SD" => 2.2055, "SD3neg" => 64, "SD2neg" => 66.2, "SD1neg" => 68.4, "SD0" => 70.6, "SD1" => 72.8, "SD2" => 75, "SD3" => 77.2],
            ["Month" => 9, "L" => 1, "M" => 71.9687, "S" => 0.03117, "SD" => 2.2433, "SD3neg" => 65.2, "SD2neg" => 67.5, "SD1neg" => 69.7, "SD0" => 72, "SD1" => 74.2, "SD2" => 76.5, "SD3" => 78.7],
            ["Month" => 10, "L" => 1, "M" => 73.2812, "S" => 0.03118, "SD" => 2.2849, "SD3neg" => 66.4, "SD2neg" => 68.7, "SD1neg" => 71, "SD0" => 73.3, "SD1" => 75.6, "SD2" => 77.9, "SD3" => 80.1],
            ["Month" => 11, "L" => 1, "M" => 74.5388, "S" => 0.03125, "SD" => 2.3293, "SD3neg" => 67.6, "SD2neg" => 69.9, "SD1neg" => 72.2, "SD0" => 74.5, "SD1" => 76.9, "SD2" => 79.2, "SD3" => 81.5],
            ["Month" => 12, "L" => 1, "M" => 75.7488, "S" => 0.03137, "SD" => 2.3762, "SD3neg" => 68.6, "SD2neg" => 71, "SD1neg" => 73.4, "SD0" => 75.7, "SD1" => 78.1, "SD2" => 80.5, "SD3" => 82.9],
            ["Month" => 13, "L" => 1, "M" => 76.9186, "S" => 0.03154, "SD" => 2.426, "SD3neg" => 69.6, "SD2neg" => 72.1, "SD1neg" => 74.5, "SD0" => 76.9, "SD1" => 79.3, "SD2" => 81.8, "SD3" => 84.2],
            ["Month" => 14, "L" => 1, "M" => 78.0497, "S" => 0.03174, "SD" => 2.4773, "SD3neg" => 70.6, "SD2neg" => 73.1, "SD1neg" => 75.6, "SD0" => 78, "SD1" => 80.5, "SD2" => 83, "SD3" => 85.5],
            ["Month" => 15, "L" => 1, "M" => 79.1458, "S" => 0.03197, "SD" => 2.5303, "SD3neg" => 71.6, "SD2neg" => 74.1, "SD1neg" => 76.6, "SD0" => 79.1, "SD1" => 81.7, "SD2" => 84.2, "SD3" => 86.7],
            ["Month" => 16, "L" => 1, "M" => 80.2113, "S" => 0.03222, "SD" => 2.5844, "SD3neg" => 72.5, "SD2neg" => 75, "SD1neg" => 77.6, "SD0" => 80.2, "SD1" => 82.8, "SD2" => 85.4, "SD3" => 88],
            ["Month" => 17, "L" => 1, "M" => 81.2487, "S" => 0.0325, "SD" => 2.6406, "SD3neg" => 73.3, "SD2neg" => 76, "SD1neg" => 78.6, "SD0" => 81.2, "SD1" => 83.9, "SD2" => 86.5, "SD3" => 89.2],
            ["Month" => 18, "L" => 1, "M" => 82.2587, "S" => 0.03279, "SD" => 2.6973, "SD3neg" => 74.2, "SD2neg" => 76.9, "SD1neg" => 79.6, "SD0" => 82.3, "SD1" => 85, "SD2" => 87.7, "SD3" => 90.4],
            ["Month" => 19, "L" => 1, "M" => 83.2418, "S" => 0.0331, "SD" => 2.7553, "SD3neg" => 75, "SD2neg" => 77.7, "SD1neg" => 80.5, "SD0" => 83.2, "SD1" => 86, "SD2" => 88.8, "SD3" => 91.5],
            ["Month" => 20, "L" => 1, "M" => 84.1996, "S" => 0.03342, "SD" => 2.814, "SD3neg" => 75.8, "SD2neg" => 78.6, "SD1neg" => 81.4, "SD0" => 84.2, "SD1" => 87, "SD2" => 89.8, "SD3" => 92.6],
            ["Month" => 21, "L" => 1, "M" => 85.1348, "S" => 0.03376, "SD" => 2.8742, "SD3neg" => 76.5, "SD2neg" => 79.4, "SD1neg" => 82.3, "SD0" => 85.1, "SD1" => 88, "SD2" => 90.9, "SD3" => 93.8],
            ["Month" => 22, "L" => 1, "M" => 86.0477, "S" => 0.0341, "SD" => 2.9342, "SD3neg" => 77.2, "SD2neg" => 80.2, "SD1neg" => 83.1, "SD0" => 86, "SD1" => 89, "SD2" => 91.9, "SD3" => 94.9],
            ["Month" => 23, "L" => 1, "M" => 86.941, "S" => 0.03445, "SD" => 2.9951, "SD3neg" => 78, "SD2neg" => 81, "SD1neg" => 83.9, "SD0" => 86.9, "SD1" => 89.9, "SD2" => 92.9, "SD3" => 95.9],
            ["Month" => 24, "L" => 1, "M" => 87.8161, "S" => 0.03479, "SD" => 3.0551, "SD3neg" => 78.7, "SD2neg" => 81.7, "SD1neg" => 84.8, "SD0" => 87.8, "SD1" => 90.9, "SD2" => 93.9, "SD3" => 97],
            ["Month" => 25, "L" => 1, "M" => 87.1161, "S" => 0.03507, "SD" => 3.0551, "SD3neg" => 78, "SD2neg" => 81, "SD1neg" => 84.1, "SD0" => 87.1, "SD1" => 90.2, "SD2" => 93.2, "SD3" => 96.3],
            ["Month" => 26, "L" => 1, "M" => 87.972, "S" => 0.03542, "SD" => 3.116, "SD3neg" => 78.6, "SD2neg" => 81.7, "SD1neg" => 84.9, "SD0" => 88, "SD1" => 91.1, "SD2" => 94.2, "SD3" => 97.3],
            ["Month" => 27, "L" => 1, "M" => 88.8065, "S" => 0.03576, "SD" => 3.1757, "SD3neg" => 79.3, "SD2neg" => 82.5, "SD1neg" => 85.6, "SD0" => 88.8, "SD1" => 92, "SD2" => 95.2, "SD3" => 98.3],
            ["Month" => 28, "L" => 1, "M" => 89.6197, "S" => 0.0361, "SD" => 3.2353, "SD3neg" => 79.9, "SD2neg" => 83.1, "SD1neg" => 86.4, "SD0" => 89.6, "SD1" => 92.9, "SD2" => 96.1, "SD3" => 99.3],
            ["Month" => 29, "L" => 1, "M" => 90.412, "S" => 0.03642, "SD" => 3.2928, "SD3neg" => 80.5, "SD2neg" => 83.8, "SD1neg" => 87.1, "SD0" => 90.4, "SD1" => 93.7, "SD2" => 97, "SD3" => 100.3],
            ["Month" => 30, "L" => 1, "M" => 91.1828, "S" => 0.03674, "SD" => 3.3501, "SD3neg" => 81.1, "SD2neg" => 84.5, "SD1neg" => 87.8, "SD0" => 91.2, "SD1" => 94.5, "SD2" => 97.9, "SD3" => 101.2],
            ["Month" => 31, "L" => 1, "M" => 91.9327, "S" => 0.03704, "SD" => 3.4052, "SD3neg" => 81.7, "SD2neg" => 85.1, "SD1neg" => 88.5, "SD0" => 91.9, "SD1" => 95.3, "SD2" => 98.7, "SD3" => 102.1],
            ["Month" => 32, "L" => 1, "M" => 92.6631, "S" => 0.03733, "SD" => 3.4591, "SD3neg" => 82.3, "SD2neg" => 85.7, "SD1neg" => 89.2, "SD0" => 92.7, "SD1" => 96.1, "SD2" => 99.6, "SD3" => 103],
            ["Month" => 33, "L" => 1, "M" => 93.3753, "S" => 0.03761, "SD" => 3.5118, "SD3neg" => 82.8, "SD2neg" => 86.4, "SD1neg" => 89.9, "SD0" => 93.4, "SD1" => 96.9, "SD2" => 100.4, "SD3" => 103.9],
            ["Month" => 34, "L" => 1, "M" => 94.0711, "S" => 0.03787, "SD" => 3.5625, "SD3neg" => 83.4, "SD2neg" => 86.9, "SD1neg" => 90.5, "SD0" => 94.1, "SD1" => 97.6, "SD2" => 101.2, "SD3" => 104.8],
            ["Month" => 35, "L" => 1, "M" => 94.7532, "S" => 0.03812, "SD" => 3.612, "SD3neg" => 83.9, "SD2neg" => 87.5, "SD1neg" => 91.1, "SD0" => 94.8, "SD1" => 98.4, "SD2" => 102, "SD3" => 105.6],
            ["Month" => 36, "L" => 1, "M" => 95.4236, "S" => 0.03836, "SD" => 3.6604, "SD3neg" => 84.4, "SD2neg" => 88.1, "SD1neg" => 91.8, "SD0" => 95.4, "SD1" => 99.1, "SD2" => 102.7, "SD3" => 106.4],
            ["Month" => 37, "L" => 1, "M" => 96.0835, "S" => 0.03858, "SD" => 3.7069, "SD3neg" => 85, "SD2neg" => 88.7, "SD1neg" => 92.4, "SD0" => 96.1, "SD1" => 99.8, "SD2" => 103.5, "SD3" => 107.2],
            ["Month" => 38, "L" => 1, "M" => 96.7337, "S" => 0.03879, "SD" => 3.7523, "SD3neg" => 85.5, "SD2neg" => 89.2, "SD1neg" => 93, "SD0" => 96.7, "SD1" => 100.5, "SD2" => 104.2, "SD3" => 108],
            ["Month" => 39, "L" => 1, "M" => 97.3749, "S" => 0.039, "SD" => 3.7976, "SD3neg" => 86, "SD2neg" => 89.7, "SD1neg" => 93.5, "SD0" => 97.4, "SD1" => 101.1, "SD2" => 104.8, "SD3" => 108.6],
            ["Month" => 40, "L" => 1, "M" => 98.0085, "S" => 0.03919, "SD" => 3.8409, "SD3neg" => 86.5, "SD2neg" => 90.2, "SD1neg" => 94, "SD0" => 98, "SD1" => 101.7, "SD2" => 105.4, "SD3" => 109.2],
            ["Month" => 41, "L" => 1, "M" => 98.636, "S" => 0.03937, "SD" => 3.8831, "SD3neg" => 87, "SD2neg" => 90.7, "SD1neg" => 94.5, "SD0" => 98.6, "SD1" => 102.3, "SD2" => 106, "SD3" => 109.9],
            ["Month" => 42, "L" => 1, "M" => 99.2588, "S" => 0.03954, "SD" => 3.9242, "SD3neg" => 87.4, "SD2neg" => 91.2, "SD1neg" => 94.9, "SD0" => 99.3, "SD1" => 103, "SD2" => 106.7, "SD3" => 110.6],
            ["Month" => 43, "L" => 1, "M" => 99.8776, "S" => 0.03969, "SD" => 3.9642, "SD3neg" => 87.9, "SD2neg" => 91.7, "SD1neg" => 95.4, "SD0" => 99.9, "SD1" => 103.6, "SD2" => 107.3, "SD3" => 111.2],
            ["Month" => 44, "L" => 1, "M" => 100.4928, "S" => 0.03984, "SD" => 4.002, "SD3neg" => 88.4, "SD2neg" => 92.1, "SD1neg" => 95.8, "SD0" => 100.5, "SD1" => 104.1, "SD2" => 107.8, "SD3" => 111.7],
            ["Month" => 45, "L" => 1, "M" => 101.1046, "S" => 0.03997, "SD" => 4.0388, "SD3neg" => 88.8, "SD2neg" => 92.6, "SD1neg" => 96.2, "SD0" => 101.1, "SD1" => 104.6, "SD2" => 108.3, "SD3" => 112.3],
            ["Month" => 46, "L" => 1, "M" => 101.7128, "S" => 0.04009, "SD" => 4.0745, "SD3neg" => 89.3, "SD2neg" => 93, "SD1neg" => 96.6, "SD0" => 101.7, "SD1" => 105.2, "SD2" => 108.9, "SD3" => 112.8],
            ["Month" => 47, "L" => 1, "M" => 102.3174, "S" => 0.04021, "SD" => 4.109, "SD3neg" => 89.7, "SD2neg" => 93.4, "SD1neg" => 97, "SD0" => 102.3, "SD1" => 105.7, "SD2" => 109.4, "SD3" => 113.4],
            ["Month" => 48, "L" => 1, "M" => 102.918, "S" => 0.04032, "SD" => 4.1425, "SD3neg" => 90.1, "SD2neg" => 93.9, "SD1neg" => 97.4, "SD0" => 102.9, "SD1" => 106.3, "SD2" => 110, "SD3" => 113.9],
            ["Month" => 49, "L" => 1, "M" => 103.5145, "S" => 0.04042, "SD" => 4.1748, "SD3neg" => 90.5, "SD2neg" => 94.3, "SD1neg" => 97.8, "SD0" => 103.5, "SD1" => 106.8, "SD2" => 110.6, "SD3" => 114.5],
            ["Month" => 50, "L" => 1, "M" => 104.1078, "S" => 0.04051, "SD" => 4.2061, "SD3neg" => 90.9, "SD2neg" => 94.7, "SD1neg" => 98.2, "SD0" => 104.1, "SD1" => 107.2, "SD2" => 110.9, "SD3" => 114.9],
            ["Month" => 51, "L" => 1, "M" => 104.6974, "S" => 0.04059, "SD" => 4.2364, "SD3neg" => 91.2, "SD2neg" => 95.1, "SD1neg" => 98.6, "SD0" => 104.7, "SD1" => 107.6, "SD2" => 111.3, "SD3" => 115.2],
            ["Month" => 52, "L" => 1, "M" => 105.2836, "S" => 0.04067, "SD" => 4.2657, "SD3neg" => 91.6, "SD2neg" => 95.5, "SD1neg" => 98.9, "SD0" => 105.3, "SD1" => 108, "SD2" => 111.7, "SD3" => 115.6],
            ["Month" => 53, "L" => 1, "M" => 105.8662, "S" => 0.04073, "SD" => 4.2939, "SD3neg" => 91.9, "SD2neg" => 95.9, "SD1neg" => 99.3, "SD0" => 105.9, "SD1" => 108.4, "SD2" => 112, "SD3" => 115.9],
            ["Month" => 54, "L" => 1, "M" => 106.4453, "S" => 0.04078, "SD" => 4.3212, "SD3neg" => 92.2, "SD2neg" => 96.2, "SD1neg" => 99.6, "SD0" => 106.4, "SD1" => 108.7, "SD2" => 112.4, "SD3" => 116.3],
            ["Month" => 55, "L" => 1, "M" => 107.0209, "S" => 0.04083, "SD" => 4.3474, "SD3neg" => 92.5, "SD2neg" => 96.6, "SD1neg" => 99.9, "SD0" => 107, "SD1" => 109.1, "SD2" => 112.7, "SD3" => 116.6],
            ["Month" => 56, "L" => 1, "M" => 107.593, "S" => 0.04086, "SD" => 4.3727, "SD3neg" => 92.8, "SD2neg" => 97, "SD1neg" => 100.3, "SD0" => 107.6, "SD1" => 109.4, "SD2" => 113, "SD3" => 116.9],
            ["Month" => 57, "L" => 1, "M" => 108.1616, "S" => 0.04088, "SD" => 4.3969, "SD3neg" => 93, "SD2neg" => 97.3, "SD1neg" => 100.6, "SD0" => 108.2, "SD1" => 109.7, "SD2" => 113.3, "SD3" => 117.2],
            ["Month" => 58, "L" => 1, "M" => 108.7268, "S" => 0.04089, "SD" => 4.4202, "SD3neg" => 93.3, "SD2neg" => 97.6, "SD1neg" => 100.9, "SD0" => 108.7, "SD1" => 110.1, "SD2" => 113.6, "SD3" => 117.5],
            ["Month" => 59, "L" => 1, "M" => 109.2885, "S" => 0.04089, "SD" => 4.4424, "SD3neg" => 93.5, "SD2neg" => 97.9, "SD1neg" => 101.2, "SD0" => 109.3, "SD1" => 110.3, "SD2" => 113.8, "SD3" => 117.8],
            ["Month" => 60, "L" => 1, "M" => 109.8468, "S" => 0.04088, "SD" => 4.4637, "SD3neg" => 93.7, "SD2neg" => 98.2, "SD1neg" => 101.5, "SD0" => 109.8, "SD1" => 110.6, "SD2" => 114.1, "SD3" => 118.1]
        ];

        if ($this->child->jenis_kelamin == "Laki-laki") {
            if ($tinggi < $tableZscoreBoys[$umurBulan]["SD0"]) {
                $bbu = ($tinggi - $tableZscoreBoys[$umurBulan]["SDO"]) / ($tableZscoreBoys[$umurBulan]["SD0"] - $tableZscoreBoys[$umurBulan]["SD1neg"]);
                return $bbu;
            } else if ($tinggi > $tableZscoreBoys[$umurBulan]["SDO"]) {
                $bbu = ($tinggi - $tableZscoreBoys[$umurBulan]["SD0"]) / ($tableZscoreBoys[$umurBulan]["SD1"] - $tableZscoreBoys[$umurBulan]["SD0"]);
                return $bbu;
            }
        } else if ($this->child->jenis_kelamin == "Perempuan") {
            if ($tinggi < $tableZscoreGirls[$umurBulan]["SD0"]) {
                $bbu = ($tinggi - $tableZscoreGirls[$umurBulan]["SDO"]) / ($tableZscoreGirls[$umurBulan]["SD0"] - $tableZscoreGirls[$umurBulan]["SD1neg"]);
                return $bbu;
            } else if ($tinggi > $tableZscoreGirls[$umurBulan]["SDO"]) {
                $bbu = ($tinggi - $tableZscoreGirls[$umurBulan]["SD0"]) / ($tableZscoreGirls[$umurBulan]["SD1"] - $tableZscoreGirls[$umurBulan]["SD0"]);
                return $bbu;
            }
        }
    }

    function klasifikasiBBU($umur, $bb_u)
    {
        if ($umur >= 0 && $umur <= 60) {
            if ($bb_u < -3) {
                return "Berat badan sangat kurang (severely underweight)";
            } elseif ($bb_u >= -3 && $bb_u < -2) {
                return "Berat badan kurang (underweight)";
            } elseif ($bb_u >= -2 && $bb_u <= 1) {
                return "Berat badan normal";
            } elseif ($bb_u > 1) {
                return "Risiko berat badan lebih";
            } else {
                return "Klasifikasi tidak tersedia";
            }
        } else {
            return "Usia tidak valid untuk klasifikasi ini";
        }
    }

    function klasifikasiTBU($umur, $tb_u)
    {
        if ($umur >= 0 && $umur <= 60) {
            if ($tb_u < -3) {
                return "Sangat pendek (severely stunted)";
            } elseif ($tb_u >= -3 && $tb_u < -2) {
                return "Pendek (stunted)";
            } elseif ($tb_u >= -2 && $tb_u <= 3) {
                return "Normal";
            } elseif ($tb_u > 3) {
                return "Tinggi";
            } else {
                return "Klasifikasi tidak tersedia";
            }
        } else {
            return "Usia tidak valid untuk klasifikasi ini";
        }
    }
}
